<!-- dashboard.component.html -->
<div class="dashboard-container">
  <!-- Header -->
  <app-header></app-header>
  
  <!-- Main Content -->
  <div class="dashboard-content">
    <!-- Sidebar -->
    <app-sidebar></app-sidebar>

    <!-- Main Panel -->
    <main class="main-panel">
      <!-- Welcome Header -->
      <div class="welcome-section">
        <div class="welcome-text">
          <h1>Bonjour, {{userName()}}!</h1>
          <p>Voici un résumé de votre activité </p>
        </div>
        <div class="date-filter">
          <button mat-stroked-button>
            <mat-icon>calendar_today</mat-icon>
            Aujourd'hui
          </button>
        </div>
      </div>

      <!-- Summary Cards -->
      <div class="summary-grid">
        <mat-card class="summary-card">
          <div class="card-content">
            <div class="card-icon total-products">
              <mat-icon>inventory_2</mat-icon>
            </div>
            <div class="card-text">
              <h3>{{TotalArt()}}</h3>
              <p>Produits Total</p>
            </div>
            <span class="trend positive">
              <mat-icon>trending_up</mat-icon>
              
            </span>
          </div>
        </mat-card>

        <mat-card class="summary-card">
          <div class="card-content">
            <div class="card-icon low-stock">
              <mat-icon>warning</mat-icon>
            </div>
            <div class="card-text">
              <h3>{{TotalQteFaible()}}</h3>
              <p>Stock Faible</p>
            </div>
            <span class="trend negative">
              <mat-icon>trending_down</mat-icon>
              
            </span>
          </div>
        </mat-card>

        <mat-card class="summary-card">
          <div class="card-content">
            <div class="card-icon orders">
              <mat-icon>shopping_cart</mat-icon>
            </div>
            <div class="card-text">
              <h3>{{TotalQteTotal()}}</h3>
              <p>stock positive</p>
            </div>
            <span class="trend positive">
              <mat-icon>trending_up</mat-icon>
            </span>
          </div>
        </mat-card>
      </div>

      <!-- Charts Section 
      <div class="charts-grid">
        < !-- Sales Chart --  >
        <mat-card class="chart-card">
          <div class="card-header">
            <h3>Ventes Mensuelles</h3>
            <button mat-button color="primary">
              Voir détails
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </div>
          <div class="chart-container">
            <div class="chart-placeholder">
              <mat-icon>bar_chart</mat-icon>
              <p>Graphique des ventes mensuelles</p>
            </div>
          </div>
        </mat-card>

        <! -- Categories Chart -- >
        <mat-card class="chart-card">
          <div class="card-header">
            <h3>Catégories de Produits</h3>
            <button mat-button color="primary">
              Voir tout
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </div>
          <div class="chart-container">
            <div class="chart-placeholder">
              <mat-icon>pie_chart</mat-icon>
              <p>Répartition par catégorie</p>
            </div>
          </div>
        </mat-card>
      </div>-->

      <!-- Activity Section -->
      <div class="activity-grid">
        <!-- Recent Activity -->
        <mat-card class="activity-card">
          <div class="card-header">
            <h3>article ajouter Récent</h3>
            <button mat-button color="primary">Voir Tout</button>
          </div>
          
          @if (isLoading()) {
              <div class="loading-spinner">
                <mat-spinner diameter="40"></mat-spinner>
              </div>
            }
           @else if (stock().length === 0) {
              <div class="empty-state">
                  <mat-icon>inventory_2</mat-icon>
                  <h3>Aucun article trouvé</h3>
              </div>
            } @else {
              <div class="activity-list" *ngFor="let article of articles() ">
                <div class="activity-item">
                  <div class="activity-icon primary">
                    <mat-icon>add</mat-icon>
                  </div>
                  <div class="activity-content">
                    <p class="activity-title">Nouveau produit ajouté</p>
                    <p class="activity-desc">{{article.code}}</p>
                    <span class="activity-time">{{article.designation}} | {{article.categorie.nom}}  </span>
                  </div>
                </div>
              </div>
            }
        </mat-card>

        <!-- Low Stock -->
        <mat-card class="activity-card">
          <div class="card-header">
            <h3>Stock Faible</h3>
            <a routerLink="/stock" color="primary commander-link">Gérer le Stock</a>
          </div>
          @if (isLoading()) {
              <div class="loading-spinner">
                <mat-spinner diameter="40"></mat-spinner>
              </div>
            }
           @else if (stock().length === 0) {
              <div class="empty-state">
                  <mat-icon>inventory_2</mat-icon>
                  <h3>Aucun article trouvé</h3>
              </div>
            } @else {
              <div class="stock-list">
                <div class="stock-item" *ngFor="let stock of stock()">
                  <div class="stock-info">
                    <h4>{{ stock.article.code }}</h4>
                    <p>{{ stock.article.designation }} • {{ stock.quantiteFinale }} unités</p>
                  </div>

                  <div class="stock-progress">
                    <span>{{ stock.depot.nom }}</span>
                  </div>
                    <a routerLink="/BonReception" color="primary" class="stock-action commander-link">Commander</a> 
                </div>
              </div>

            }
        </mat-card>
      </div>
    </main>
  </div>
  <app-footer></app-footer>
</div>